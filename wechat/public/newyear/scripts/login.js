"use strict";$(function(){var e=0,t={title:"纳尼？！2015我居然在搜易贷赚了这么多？",desc:"快来帮我拆红包!我心目中最棒的理财平台哟!来看看你错过多少收益！",timelineDesc:"纳尼？！2015我居然在搜易贷赚了这么多？快来帮我拆红包，看看你错过多少收益！",imgUrl:"https://weixin.souyidai.com/newyear/images/share.png",link:location.href};isWechat&&($.ajax({url:"/serve/jssign",type:"GET",dataType:"json",data:{url:location.href},success:function(e){0===e.errorCode&&wx.config(e.result)}}),wx.ready(function(){wx.onMenuShareTimeline({title:t.timelineDesc,link:t.link,imgUrl:t.imgUrl,success:function(){_paq.push(["trackEvent","timemachine","share","timeline"]),$(".share-overlay").hide()}}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(){_paq.push(["trackEvent","timemachine","share","message"]),$(".share-overlay").hide()}})}));var n=function(e,t){disBtn($(e));var n=setInterval(function(){$(e).text("重新发送("+t+")"),t--,0===t&&(clearInterval(n),$(e).text("重新发送"),enBtn($(e)))},1e3)};$("#btn-share").on("click",function(){$(".share-overlay").show()}),$(".share-overlay").on("click",function(){$(this).hide()}),$("#btn-open").on("click",function(){var e=$("#username").val();return""===e?void toastShow("手机号不能为空"):/^1[34578][0-9]{9}$/.test(e)?(disBtn($("#btn-open")),void $.ajax({url:"/timemachine/share/vaild",type:"POST",dataType:"json",data:{username:e},success:function(e){1===e.errorCode?dialogShow("#login"):($("#btn-open").hide(),$("#regist-form").show(),n($("#re-send"),60))},error:function(){toastShow("网络连接失败,请重新尝试")},complete:function(){enBtn($("#btn-open"))}})):void toastShow("请输入有效的手机号")}),$("#re-send").on("click",function(){disBtn($("#re-send")),$.ajax({type:"POST",url:"/timemachine/share/vaild",dataType:"json",data:{username:$("#username").val()},success:function(e){1===e.errorCode?dialogShow("#login"):($("#smsCode").val(""),n($("#re-send"),60))},error:function(){toastShow("网络连接失败,请重新尝试")},complete:function(){}})}),$("#btn-regist").on("click",function(){var t=$("#username").val(),n=$("#password").val(),o=$("#smsCode").val();if(""===o)return void toastShow("短信验证码不能为空");if(""===n)return void toastShow("密码不能为空");if(n.length>20||n.length<6)return void toastShow("密码长度应为6-20个字符");var a=/[^a-zA-Z0-9~`!@#$%^&*()_=+\[{\]}\|;:\'\",<.>\/?-]/;return a.test(n)?void toastShow("密码请不要使用特殊字符"):(disBtn($("#btn-regist")),void $.ajax({type:"POST",url:"/timemachine/share/regist",dataType:"json",data:{username:t,password:n,smscode:o},success:function(t){errorHandle(t)&&(e=t.data.userId,document.cookie="syd_auth_verify="+e+"|"+t.data.accessToken+";path=/;domain=.souyidai.com",location.href="https://weixin.souyidai.com/newyear/")},error:function(){toastShow("网络连接失败,请重新尝试")},complete:function(){enBtn($("#btn-regist"))}}))}),$(".icon-eye").on("click",function(){var e=$(this).parent().find("input");"text"===e.attr("type")?e.attr("type","password"):e.attr("type","text")}),$("#login-btn").on("click",function(){disBtn($("#login-btn")),$.ajax({type:"POST",url:"/timemachine/share/login",dataType:"json",data:{username:$("#username").val(),password:$("#login-password").val()},success:function(t){errorHandle(t)&&(e=t.data.userId,document.cookie="syd_auth_verify="+e+"|"+t.data.accessToken+";path=/;domain=.souyidai.com",location.href="https://weixin.souyidai.com/newyear/")},error:function(){toastShow("网络连接失败,请重新尝试")},complete:function(){enBtn($("#login-btn"))}})})});